"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _createForOfIteratorHelper(o){if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(o=_unsupportedIterableToArray(o))){var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var it,normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var videojs=window.videojs;var VJSButton=videojs.getComponent("Button");var VJSComponent=videojs.getComponent("Component");var CastButtonSVG="\n<svg x=\"0px\" y=\"0px\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g><path id=\"cast_caf_icon_arch0\" class=\"cast_caf_state_d\" d=\"M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z\"></path><path id=\"cast_caf_icon_arch1\" class=\"cast_caf_state_d\" d=\"M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z\"></path><path id=\"cast_caf_icon_arch2\" class=\"cast_caf_state_d\" d=\"M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z\"></path><path id=\"cast_caf_icon_box\" class=\"cast_caf_state_d\" d=\"M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z\"></path><path id=\"cast_caf_icon_boxfill\" class=\"cast_caf_state_h\" d=\"M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z\"></path></g></svg>\n";var AirPlayButtonSVG="\n<svg width=\"22\" height=\"20\" viewBox=\"0 0 22 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M4 15H3C2.46957 15 1.96086 14.7893 1.58579 14.4142C1.21071 14.0391 1 13.5304 1 13V3C1 2.46957 1.21071 1.96086 1.58579 1.58579C1.96086 1.21071 2.46957 1 3 1H19C19.5304 1 20.0391 1.21071 20.4142 1.58579C20.7893 1.96086 21 2.46957 21 3V13C21 13.5304 20.7893 14.0391 20.4142 14.4142C20.0391 14.7893 19.5304 15 19 15H18\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M11 13L16 19H6L11 13Z\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n";var DEV_EXT_PATTERN=/\.(seb2|lolo|jim|jeff|kevin|andrea|flo|stage1|stage2|stage3|gillian|common)\//;// OPPORTUNITIES TO REFACTOR : move all registration outside of plugins avoid closures in plugins and components
var wmakerPlayerSettings={inactivityTimeout:1000};var PLAYER_SETTINGS={TEXT_AD_ROTATION_TIME_MS:5000};var COMPONENTS_NAMES={PLAYLIST:"Playlist",SOCIAL_MENU:"SocialMenu",CLOSE_PREROLL:"CloseAdButton",LINK_OVERLAY:"LinkOverlay",REMAINING_TIME:"RemainingTimeDisplay",HD_BUTTON:"HDButton",LOGO:"Logo",AUTHOR_BLOCK:"AuthorBlock",TEXT_AD:"TextAd",PREROLL_VOLUME:"PrerollVolume",EMBED_INFO:"EmbedInfo",GOOGLE_CHROME_CAST:"GoogleCastLauncher"};var CUSTOM_CLASSLIST={CUSTOM_WAITING:"vjs-custom-waiting"};var initialData={bufferBarColor:"#9a9894",controlBarColor:"#000000",progressBarColor:"#0099ff",iconsColor:"#e6e3dc",enableEmbed:true,enablePlaylist:true,enableShare:true,from:undefined,logo:true,position:2,template:"1",vidTitle:undefined};var cachedPlayer;var cachedPlayerState=initialData;function updateCache(keyValue){cachedPlayerState=Object.assign({},cachedPlayerState,Utils.cleanOutsideObject(keyValue))}var STAT_EVENTS={VIDEO_STARTED:"start",VIDEO_STOPPED:"stop",PREROLL_STARTED:"prerollLaunched",SKIPPED_PREROLL:"SKIPPED_PREROLL",CLICKED_PREROLL:"prerollClicked",CLICKED_AD:"pubClicked"};var PLAYER_EVENTS={CONTENT_CHANGED:"contentchanged",READY_FOR_PREROLL:"readyforpreroll",AD_PLAYING:"adplaying",AD_ENDED:"adended",AD_ERROR:"aderror",ADS_READY:"adsready",ADS_AD_STARTED:"ads-ad-started",AD_TIME_UPDATE:"adtimeupdate",AD_TIMEOUT:"adtimeout",NO_POSTROLL:"nopostroll",AD_VOLUME_CHANGE:"advolumechange",AD_QUITTED:"adquitted",PLAYING:"playing",PLAY:"play",LOADED_DATA:"loadeddata",LOADED_META_DATA:"loadedmetadata",CONTENT_ENDED:"contentended",TIME_UPDATE:"timeupdate",ABORT:"abort",EMPTIED:"emptied",ERROR:"error",ENDED:"ended",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",SEEKING:"seeking",SEEKED:"seeked",WAITING:"waiting"};var CUSTOM_COLORS_TO_CLASSNAME_MAP={iconsColor:"icon-style",controlBarColor:"controlbar-style",progressBarColor:"progressbar-style",bufferBarColor:"bufferbar-style"};function fetchVideoURL(urlSite,videoId,vidName){var getVideoURLEndpoint="".concat(Utils.formatURL(urlSite),"/apiv3/video/getVideo/").concat(videoId,"/").concat(vidName);return new Promise(function(resolve,reject){try{fetch(getVideoURLEndpoint).then(function(response){response.text().then(function(content){resolve(Utils.stripDevExtension(content))})})}catch(e){reject(e)}})}function prerollPlugin(videoData){var options=Utils.mapVideoDataToAdPluginSettings(videoData);var player=this;var CloseAdButton=videojs.extend(VJSButton,{buildCSSClass:function buildCSSClass(){return"vjs-ad-close-button"},handleClick:function handleClick(){player.trigger(STAT_EVENTS.SKIPPED_PREROLL);quitAd()}});player.one(PLAYER_EVENTS.ERROR,function(){quitAd()});var PrerollVolume=videojs.extend(videojs.getComponent("VolumePanel"),{updateVolumeDisplay:function updateVolumeDisplay(){var that=this;var parentPlayer=that.parentComponent_;var volumeValues=[0,1,2,3];var ariaValue=parentPlayer.muted()?0:Math.round(parentPlayer.volume()*100);volumeValues.forEach(function(v){return that.muteToggle.removeClass("vjs-vol-".concat(v))});var soundClassNumber=Math.ceil(parentPlayer.volume()*4);that.muteToggle.addClass("vjs-vol-".concat(parentPlayer.muted()?0:soundClassNumber));that.volumeControl.volumeBar.updateARIAAttributes();that.volumeControl.volumeBar.volumeLevel.el().style.width="".concat(ariaValue,"%")}});var LinkOverlay=videojs.extend(VJSComponent,{createEl:function createEl(){return videojs.dom.createEl("a",{className:"link-overlay",href:options.href,target:"_blank",onclick:function onclick(e){player.trigger(STAT_EVENTS.CLICKED_PREROLL);player.muted(true);if(player.paused()){e.preventDefault();player.play()}}})}});videojs.registerComponent(COMPONENTS_NAMES.CLOSE_PREROLL,CloseAdButton);videojs.registerComponent(COMPONENTS_NAMES.LINK_OVERLAY,LinkOverlay);videojs.registerComponent(COMPONENTS_NAMES.PREROLL_VOLUME,PrerollVolume);// player.ads.settings.debug = true;
player.on(PLAYER_EVENTS.CONTENT_CHANGED,function(){player.trigger(PLAYER_EVENTS.ADS_READY)});player.on(PLAYER_EVENTS.CONTENT_ENDED,function(){player.trigger(PLAYER_EVENTS.NO_POSTROLL)});player.on(PLAYER_EVENTS.AD_ERROR,function(){quitAd()});player.on(PLAYER_EVENTS.READY_FOR_PREROLL,function(){player.ads.startLinearAdMode();// create snapshot of the source
player.src(options.src);var maxTry=40;// 4 seconds
var tryNumber=0;var retry=setInterval(function(){tryNumber++;// Safe exit shouldn't be fired
if(tryNumber>=maxTry){quitAd();clearInterval(retry)}if(player.paused()){player.play()}else{clearInterval(retry)}},100)});player.one(PLAYER_EVENTS.AD_PLAYING,function(){initAdUI();player.trigger(PLAYER_EVENTS.ADS_AD_STARTED)});// resume content when all your linear ads have finished
player.one(PLAYER_EVENTS.AD_ENDED,function(){quitAd()});player.on(PLAYER_EVENTS.AD_TIME_UPDATE,function(){if(player.paused()){return}var duration=player.duration();var timeLeft=Math.ceil(player.remainingTime());if(options.skipTime&&duration-timeLeft>options.skipTime){if(!player.getChild(COMPONENTS_NAMES.CLOSE_PREROLL)){player.addChild(COMPONENTS_NAMES.CLOSE_PREROLL)}}var timeToDisplay=options.skipTime?Math.floor(duration-timeLeft-options.skipTime):-timeLeft;if(!player.getChild(COMPONENTS_NAMES.REMAINING_TIME)){player.addChild(COMPONENTS_NAMES.REMAINING_TIME);var display=player.getChild(COMPONENTS_NAMES.REMAINING_TIME);display.setText(videoData.remainingadtext,Math.abs(timeToDisplay));display.show()}else{var _display=player.getChild(COMPONENTS_NAMES.REMAINING_TIME);if(timeToDisplay<0){_display.setTime(Math.abs(timeToDisplay))}else{_display.hide()}}});player.trigger(PLAYER_EVENTS.ADS_READY);// Safety should play video if ad timeout
player.one(PLAYER_EVENTS.AD_TIMEOUT,function(){quitAd()});function onVolumeChange(){if(player.getChild(COMPONENTS_NAMES.PREROLL_VOLUME)){player.getChild(COMPONENTS_NAMES.PREROLL_VOLUME).updateVolumeDisplay()}}// METHODS:
function initAdUI(){player.controlBar.hide();var socialMenu=player.getChild(COMPONENTS_NAMES.SOCIAL_MENU);player.addChild(COMPONENTS_NAMES.LINK_OVERLAY);var prerollV=player.addChild(COMPONENTS_NAMES.PREROLL_VOLUME);if(Utils.isMobile()){prerollV.removeChild(prerollV.volumeControl);prerollV.addClass("without-control")}prerollV.addClass("preroll-volume-panel");prerollV.updateVolumeDisplay();player.on(PLAYER_EVENTS.AD_VOLUME_CHANGE,onVolumeChange);if(socialMenu){socialMenu.hide()}}function quitAd(){player.ads.endLinearAdMode();removeAdUI();player.controlBar.show();player.off(PLAYER_EVENTS.AD_VOLUME_CHANGE,onVolumeChange);player.trigger(PLAYER_EVENTS.AD_QUITTED);setTimeout(function(){// safe exit
// Bug ad contrib can't seek to 0;
if(player.currentTime()===0||player.ads.isContentResuming()||player.ads.isInAdMode()){player.currentTime(player.currentTime()+.01)}},1000)}function removeAdUI(){if(player.getChild(COMPONENTS_NAMES.CLOSE_PREROLL)){player.removeChild(COMPONENTS_NAMES.CLOSE_PREROLL)}if(player.getChild(COMPONENTS_NAMES.LINK_OVERLAY)){player.removeChild(COMPONENTS_NAMES.LINK_OVERLAY)}if(player.getChild(COMPONENTS_NAMES.SOCIAL_MENU)){player.getChild(COMPONENTS_NAMES.SOCIAL_MENU).show()}if(player.getChild(COMPONENTS_NAMES.PREROLL_VOLUME)){player.removeChild(COMPONENTS_NAMES.PREROLL_VOLUME)}if(player.getChild(COMPONENTS_NAMES.REMAINING_TIME)){player.removeChild(COMPONENTS_NAMES.REMAINING_TIME)}}}videojs.registerPlugin("preroll",prerollPlugin);var RemainingTimeDisplay=videojs.extend(VJSComponent,{setText:function setText(text,time){var element=this.el();element.innerHTML=text.replace("[sec]","<span id=\"remaining-time_time\">".concat(time||0,"</span>"))},setTime:function setTime(time){var element=this.el();element.querySelector("#remaining-time_time").innerHTML=time},show:function show(){var element=this.el();element.classList.remove("hide");element.classList.add("show")},hide:function hide(){var element=this.el();element.classList.remove("show");element.classList.add("hide")},createEl:function createEl(){return videojs.dom.createEl("div",{className:"remaining-time-display hide",innerHTML:"Remaining Time <span id=\"remaining-time_time\">-0:00</span>"},{"aria-live":"off"})}});videojs.registerComponent(COMPONENTS_NAMES.REMAINING_TIME,RemainingTimeDisplay);function initPLayerUI(Player,settings){updateCache(settings);var templateClassName="template_".concat(settings.template);Player.addClass(templateClassName);var colors={};colors.bufferBarColor=settings.bufferBarColor;// Icons Off
colors.controlBarColor=settings.controlBarColor;// Dominant
colors.iconsColor=settings.iconsColor;// Play and Autres
colors.progressBarColor=settings.progressBarColor;// RollOver
// LOGO
var hasLogo=settings.logo;var hasHDVersion=!!settings.vidHDName;var isSharable=settings.enableShare;var isEmbeddable=settings.enableEmbed;var hasTextAd=!!settings.urlPub;var ctrlBarEL=Player.controlBar.el();ctrlBarEL.style.display="flex";// Force Show controlBar on start
if(hasHDVersion){var HDButton=videojs.extend(VJSButton,{buildCSSClass:function buildCSSClass(){return"vjs-hd-control vjs-control vjs-icon-hd ".concat(settings.startHD?"is-hd":"")},handleClick:function(){var _handleClick=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var wasPlaying,videoUrl,pauseTime,maxTry,attempt,tryer;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:wasPlaying=!Player.paused();this.addClass("is-loading");_context.next=4;return fetchVideoURL(settings.urlSite,settings.idvideo,Player.wmaker_is_hd?settings.vidName:settings.vidHDName);case 4:videoUrl=_context.sent;if(Player.ads){Player.ads.contentSrc=videoUrl}Player.wmaker_is_hd=!Player.wmaker_is_hd;pauseTime=Player.currentTime();this.removeClass("is-loading");Player.src(videoUrl);Player.one("playing",function(){Player.currentTime(Math.floor(pauseTime)-1)});if(wasPlaying){maxTry=20;attempt=0;tryer=setInterval(function(){if(Player.paused()&&attempt<maxTry){Player.play()}else{clearInterval(tryer)}attempt++},100)}this.toggleClass("is-hd");case 13:case"end":return _context.stop();}}},_callee,this)}));function handleClick(){return _handleClick.apply(this,arguments)}return handleClick}()});videojs.registerComponent(COMPONENTS_NAMES.HD_BUTTON,HDButton);Player.controlBar.addChild(COMPONENTS_NAMES.HD_BUTTON,{},9)}var volumePanel=Player.controlBar.volumePanel;Player.controlBar.removeChild(volumePanel);volumePanel.addClass("custom-volume-panel");Player.controlBar.addChild(volumePanel,{},8);if(hasLogo){var urlTimeStamp="";var now=new Date;urlTimeStamp=now.getUTCHours().toString()+now.getUTCMinutes().toString()+now.getUTCSeconds().toString();var Logo=videojs.extend(VJSComponent,{setAttr:function setAttr(attrs){var that=this;var element=that.el();if(attrs.src){element.src=attrs.src}if(attrs.position){var _element$classList;(_element$classList=element.classList).remove.apply(_element$classList,_toConsumableArray(["1","2","3","4"].map(function(p){return"pos-".concat(p)})));element.classList.add("pos-".concat(attrs.position))}},createEl:function createEl(){return videojs.dom.createEl("img",{className:"channel-logo pos-".concat(settings.position),src:"".concat(Utils.formatURL(settings.urlSite),"/var/style/video_logo.png?=").concat(urlTimeStamp)})}});videojs.registerComponent(COMPONENTS_NAMES.LOGO,Logo);Player.addChild(COMPONENTS_NAMES.LOGO)}var AuthorBlock=videojs.extend(VJSComponent,{setVisibility:function setVisibility(isVisible,params){var element=this.el();element.style.display=isVisible?"flex":"none";if(isVisible&&params.vidTitle&&params.from){element.innerHTML="<span class=\"vid-title\">".concat(params.vidTitle,"</span>");element.innerHTML+="<span class=\"vid-author-name\">".concat(params.from,"</span>")}},createEl:function createEl(){var element=videojs.dom.createEl("div");element.classList.add("author-block");element.innerHTML="<span class=\"vid-title\">".concat(cachedPlayerState.vidTitle,"</span>");element.innerHTML+="<span class=\"vid-author-name\">".concat(cachedPlayerState.from,"</span>");return element}});videojs.registerComponent(COMPONENTS_NAMES.AUTHOR_BLOCK,AuthorBlock);if(settings.vidTitle&&settings.vidTitle!=="undefined"&&settings.from&&settings.from!=="undefined"){Player.addChild(COMPONENTS_NAMES.AUTHOR_BLOCK)}if(isSharable||isEmbeddable){var SocialMenu=videojs.extend(VJSComponent,{setElement:function setElement(elementName,isVisible){var children=this.el().querySelectorAll(".".concat(elementName));if(children){children.forEach(function(e){e.style.display=isVisible?"flex":"none"})}},createEl:function createEl(){var socialMenuElement=videojs.dom.createEl("div");if(isSharable){var twitterButton=videojs.dom.createEl("a");twitterButton.classList.add("wmaker-icon","icon-twitter","social-menu-item","shareable-item",CUSTOM_COLORS_TO_CLASSNAME_MAP.iconsColor);twitterButton.innerHTML="<span class='social-menu-text'>Twitter</span>";twitterButton.href="http://twitter.com/intent/tweet?text=Reading+"+settings.shortURL;twitterButton.target="_blank";twitterButton.onclick=function(){Player.pause()};var fbButton=videojs.dom.createEl("a");fbButton.classList.add("wmaker-icon","icon-facebook","social-menu-item","shareable-item",CUSTOM_COLORS_TO_CLASSNAME_MAP.iconsColor);fbButton.innerHTML="<span class='social-menu-text'>Facebook</span>";fbButton.href="https://www.facebook.com/sharer/sharer.php?u="+settings.urlSite+settings.urlVideo;fbButton.target="_blank";fbButton.onclick=function(){Player.pause()};socialMenuElement.appendChild(twitterButton);socialMenuElement.appendChild(fbButton)}if(isEmbeddable&&window.showIbox&&!Utils.isMobileVersion()){var shareEmbed=videojs.dom.createEl("button");shareEmbed.classList.add("wmaker-icon","icon-embed","social-menu-item","embeddable-item",CUSTOM_COLORS_TO_CLASSNAME_MAP.iconsColor);shareEmbed.innerHTML="<span class='social-menu-text'>Embed</span>";shareEmbed.onclick=function(){Player.pause();var url=settings.urlSite.slice(-1)==="/"?settings.urlSite:"".concat(settings.urlSite,"/");window.showIbox(url,"","type=3","preaction=ibox_embed&id_video="+settings.idvideo)};socialMenuElement.appendChild(shareEmbed)}socialMenuElement.classList.add("social-menu");return socialMenuElement}});videojs.registerComponent(COMPONENTS_NAMES.SOCIAL_MENU,SocialMenu);Player.addChild(COMPONENTS_NAMES.SOCIAL_MENU)}UpdateFunctions.applyColors(colors);var TextAd=videojs.extend(VJSComponent,{ads:[],index:0,interval:null,clearInterval:function(_clearInterval){function clearInterval(){return _clearInterval.apply(this,arguments)}clearInterval.toString=function(){return _clearInterval.toString()};return clearInterval}(function(){clearInterval(this.interval)}),next:function next(){this.index++;if(this.index>=this.ads.length){this.index=0}if(this.interval){}this.displayAd(this.ads[this.index])},startAutoRotate:function startAutoRotate(){var that=this;if(this.ads.length>1){this.interval=setInterval(function(){that.next()},PLAYER_SETTINGS.TEXT_AD_ROTATION_TIME_MS)}},previous:function previous(){this.index--;if(this.index<0){this.index=this.ads.length-1}if(this.interval){}this.displayAd(this.ads[this.index])},setAds:function setAds(ads){this.ads=ads;var el=this.el();if(ads.length<2){el.classList.add("hide-nav")}else{el.classList.remove("hide-nav")}this.displayAd(ads[0])},displayAd:function displayAd(ad){var currentPlayer=this.parentComponent_;var el=this.el();var contentEls=el.querySelectorAll(".vjs-text-ad_title, .vjs-text-ad_content, .vjs-text-ad_link");contentEls.forEach(function(e){return e.parentNode.removeChild(e)});var title=videojs.dom.createEl("div",{className:"vjs-text-ad_title",innerHTML:ad.titre});var content=videojs.dom.createEl("div",{className:"vjs-text-ad_content",innerHTML:ad.description});var link=videojs.dom.createEl("a",{className:"vjs-text-ad_link",href:Utils.formatURL(ad.lien_go),onclick:function onclick(){currentPlayer.trigger(STAT_EVENTS.CLICKED_AD)},innerHTML:ad.lien_show,target:"_blank"});el.appendChild(title);el.appendChild(content);el.appendChild(link)},createEl:function createEl(){var el=videojs.dom.createEl("div",{className:"vjs-text-ad",onclick:function onclick(){var comp=Player.getChild(COMPONENTS_NAMES.TEXT_AD);if(comp){comp.clearInterval()}},innerHTML:"\n                    <div class=\"vjs-text-ad_title\"></div>\n                    <div class=\"vjs-text-ad_content\"></div>\n                    <a class=\"vjs-text-ad_link\" href=\"\" target=\"_blank\"></a>\n                "});var closeButton=videojs.dom.createEl("button",{className:"vjs-text-ad_close-button",onclick:function onclick(){var comp=Player.getChild(COMPONENTS_NAMES.TEXT_AD);if(comp){comp.clearInterval();Player.removeChild(COMPONENTS_NAMES.TEXT_AD)}}});var nextButton=videojs.dom.createEl("button",{className:"vjs-text-ad_next-button vjs-text-ad-nav",onclick:function onclick(){var comp=Player.getChild(COMPONENTS_NAMES.TEXT_AD);if(comp){comp.clearInterval();comp.next()}}});var prevButton=videojs.dom.createEl("button",{className:"vjs-text-ad_prev-button vjs-text-ad-nav",onclick:function onclick(){var comp=Player.getChild(COMPONENTS_NAMES.TEXT_AD);if(comp){comp.clearInterval();comp.previous()}}});el.appendChild(closeButton);el.appendChild(prevButton);el.appendChild(nextButton);return el}});videojs.registerComponent(COMPONENTS_NAMES.TEXT_AD,TextAd);if(hasTextAd){fetch(settings.urlPub).then(function(res){return res.text()}).then(function(str){return new window.DOMParser().parseFromString(str,"application/xml")}).then(function(xml){var ads=Utils.textAdXmlToJS(xml);var adComp=Player.addChild(COMPONENTS_NAMES.TEXT_AD);adComp.hide();adComp.setAds(ads);var isShown=false;function onUpdate(){var duration=Player.duration();var currentTime=Player.currentTime();var ratioDisplay=1/6;if(currentTime>duration*ratioDisplay){var noAdPlaying=!Player.ads||!Player.ads.inAdBreak||!Player.ads.inAdBreak();if(!isShown&&noAdPlaying){adComp.show();adComp.startAutoRotate();Player.off(PLAYER_EVENTS.TIME_UPDATE,onUpdate)}}}Player.on("timeupdate",onUpdate)}).catch(console.error);;}}var PlayList=videojs.extend(VJSComponent,{playlist:[],show:function show(){if(this.playlist.length>0){var el=this.el();el.style.display="flex";cachedPlayer.addClass("playlist-is-showing")}},hide:function hide(){var el=this.el();cachedPlayer.removeClass("playlist-is-showing");el.style.display="none"},formatPlaylist:function formatPlaylist(rawPlaylist){var formattedPlaylist=[];rawPlaylist.forEach(function(pl){if(pl.location){formattedPlaylist.push(pl)}});return formattedPlaylist},addItems:function addItems(rawPlaylist){var PLAYLIST_LENGTH=4;var el=this.el();var count=1;this.playlist=this.formatPlaylist(rawPlaylist);while(this.playlist.length<PLAYLIST_LENGTH){this.playlist.push({dummy:true})}var _iterator=_createForOfIteratorHelper(this.playlist),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var track=_step.value;if(count>PLAYLIST_LENGTH)continue;if(track.dummy){var _bg="<div style=\"width:100%; height: 100%; background-color: black; opacity: .8;\">&nbsp;</div>";el.innerHTML+="\n                    <div class=\"playlist-item\">\n                    ".concat(_bg,"\n                    </div>\n                ");count++;continue}var duration=void 0;if(track.duration&&Number.isInteger(Number.parseInt(track.duration))){var date=new Date(null);date.setSeconds(track.duration);duration=date.toISOString().substr(14,5)}var bg=track.image?" <img src=\"".concat(track.image,"\" alt=\"\">"):"<div style=\"width:100%; height: 100%\">&nbsp;</div>";el.innerHTML+="<div class=\"playlist-item ".concat(!track.image&&"no-img","\">\n                  ").concat(bg,"\n                   <a class=\"playlist-link\" href=\"").concat(track.location||"","\" target=\"_PARENT\">\n                        <span class=\"title\">").concat(Utils.ellipsisString(track.title,30)||"","</span>\n                        <span class=\"creator\">").concat(track.creator||"","</span>\n                        <span class=\"duration\">").concat(duration||"","</span>\n                    </a>\n                </div>");count++}}catch(err){_iterator.e(err)}finally{_iterator.f()}},createEl:function createEl(){var el=videojs.dom.createEl("div",{className:"playlist"});el.style.display="none";return el}});videojs.registerComponent(COMPONENTS_NAMES.PLAYLIST,PlayList);function StatsPlugin(videoData){var currentPlayer=this;var srcGA=videoData.srcGA;var isInPreroll=false;var prerollLaunched=false;var lastSlice=-1;var currentSlice=0;var statInterval=setInterval(function(){if(!isInPreroll){if(!currentPlayer.paused()&&lastSlice===-1&&currentPlayer.duration()>currentPlayer.currentTime()){sendEvent(STAT_EVENTS.VIDEO_STARTED);lastSlice=currentPlayer.currentTime()}else{if(lastSlice!==-1){if(currentPlayer.duration()===currentPlayer.currentTime()){sendEvent(STAT_EVENTS.VIDEO_STOPPED);lastSlice=-1;currentSlice=0}else{var sizeSlice=currentPlayer.duration()/videoData.slice;if(lastSlice+sizeSlice<currentPlayer.currentTime()||currentPlayer.currentTime()<lastSlice){sendEvent(Math.ceil(currentPlayer.currentTime()));lastSlice=currentPlayer.currentTime()}}}}}else{if(!currentPlayer.paused()&&!prerollLaunched){sendEvent(STAT_EVENTS.PREROLL_STARTED);prerollLaunched=true}}},1000);// METHODS
function sendEvent(event){sendToGA(event);var statImgElementId="statImg";var imgSrc="".concat(videoData.stats,"&current_slice=").concat(currentSlice,"&state=").concat(event,"&html5=1&embed=").concat(videoData.embeded,"&id=").concat(videoData.idvideo);var imgTag=document.getElementById(statImgElementId);if(!imgTag){imgTag=document.createElement("img");imgTag.setAttribute("id",statImgElementId);imgTag.setAttribute("style","display: none");currentPlayer.el().appendChild(imgTag)}imgTag.setAttribute("src",imgSrc);if(!isInPreroll){currentSlice++}}function sendToGA(event){if(event.toString().search(/^[0-9]+$/)!==-1)return;if(typeof window.ga!="undefined"&&srcGA){var urlSite=videoData.urlSite;var urlVideo=videoData.urlVideo;var embeded=videoData.embeded;window.ga("send","event","".concat(urlSite).concat(urlVideo),event,embeded?"embed - ".concat(srcGA):"site",0)}else if(typeof window._gaq!="undefined"&&srcGA){var _urlSite=videoData.urlSite;var _urlVideo=videoData.urlVideo;var _embeded=videoData.embeded;window._gaq.push(["_trackEvent","".concat(_urlSite).concat(_urlVideo),event,_embeded?"embed - ".concat(srcGA):"site",0])}}/// LISTENERS
currentPlayer.on(PLAYER_EVENTS.AD_PLAYING,function(){if(!currentPlayer.hasAdBlock){isInPreroll=true}});currentPlayer.on(PLAYER_EVENTS.AD_QUITTED,function(){isInPreroll=false});currentPlayer.on(STAT_EVENTS.CLICKED_PREROLL,function(){sendEvent(STAT_EVENTS.CLICKED_PREROLL)});currentPlayer.on(STAT_EVENTS.CLICKED_AD,function(){sendEvent(STAT_EVENTS.CLICKED_AD)});currentPlayer.on(STAT_EVENTS.SKIPPED_PREROLL,function(){// sendEvent(STAT_EVENTS.SKIPPED_PREROLL);
});function dispose(){clearInterval(statInterval)}}var AirPlayButton=videojs.extend(VJSComponent,{hide:function hide(){this.addClass("hidden")},createEl:function createEl(){var button=videojs.dom.createEl("button",{className:"vjs-airplay-control hidden"});button.innerHTML=AirPlayButtonSVG;button.onclick=function(){var playerElement=cachedPlayer.el();var videoElement=playerElement.getElementsByTagName("video")[0];videoElement.webkitShowPlaybackTargetPicker()};return button},show:function show(){this.removeClass("hidden")}});var GoogleCastLauncher=videojs.extend(VJSComponent,{createEl:function createEl(){var element=videojs.dom.createEl("div",{className:"vjs-googlecast-control vjs-control"});element.innerHTML="<google-cast-launcher></google-cast-launcher>";return element}});videojs.registerComponent(COMPONENTS_NAMES.GOOGLE_CHROME_CAST,GoogleCastLauncher);var EmbedInfo=videojs.extend(VJSComponent,{setHref:function setHref(href){this.el().href=href},createEl:function createEl(){var ln=this.player_.language();var element=videojs.dom.createEl("a",{className:"vjs-embed-info-control vjs-control wmaker-icon icon-info",target:"_blank"});element.setAttribute("data-label",Translations.getTranslationOfWatchOnWebsite(ln));return element}});videojs.registerComponent(COMPONENTS_NAMES.EMBED_INFO,EmbedInfo);function MobilePlugin(){var currentPlayer=this;var playerElement=currentPlayer.el();var videoElement=playerElement.getElementsByTagName("video")[0];if(window.WebKitPlaybackTargetAvailabilityEvent){videojs.registerComponent("AirPlayButton",AirPlayButton);var airPlayButton=currentPlayer.controlBar.addChild("AirPlayButton");videoElement.addEventListener("webkitplaybacktargetavailabilitychanged",function(event){if(event.availability==="available"){airPlayButton.show()}else{airPlayButton.hide()}})}videoElement.setAttribute("playsinline","playsinline");currentPlayer.removeClass("vjs-controls-disabled");currentPlayer.on([PLAYER_EVENTS.AD_PLAYING,"playing"],function(){currentPlayer.enableTouchActivity()});var volumePanel=currentPlayer.controlBar.volumePanel;volumePanel.removeChild(volumePanel.volumeControl);volumePanel.addClass("without-control")}videojs.registerPlugin("stats",StatsPlugin);videojs.registerPlugin("mobile",MobilePlugin);function makeForceAutoplay(Player){return function(){setTimeout(function(){if(Player.paused()){Player.muted(true);Player.play()}},200)}}/**
 * Init video js controller and plugins
 * @param elementID
 * @param data as injected by the PHP getEmbedHTML5JS method
 * @returns {Promise<void>}
 */function initVideo(_x,_x2){return _initVideo.apply(this,arguments)}function _initVideo(){_initVideo=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(elementID,data){var isMobile,DOMPlayer,Player,ln,info,castPlayer,Playlist,videoURL,urlToBlockStatus;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=Utils.cleanOutsideObject(data);isMobile=Utils.isMobile();// data.idvideo = "962806"
// data.vidName = "10848527.mp4"
// data.vidHDName = "10848527_hd.mp4"
if(elementID){_context3.next=4;break}throw new Error("You have to provide a element id for the video");case 4:_context3.prev=4;DOMPlayer=document.getElementById(elementID);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3["catch"](4);throw new Error("Element is not on the page");case 11:Player=videojs(DOMPlayer||elementID,_objectSpread({},wmakerPlayerSettings,{controls:!isMobile}));Player.el().oncontextmenu=function(e){e.preventDefault();return false};ln=Player.language();if(data.prerollStop==="0"){data.remainingadtext=Translations.fullPrerollMsg(ln)}else{data.remainingadtext=Translations.remainingAdText(ln)}if(data.embeded){info=Player.controlBar.addChild(COMPONENTS_NAMES.EMBED_INFO,{},6);info.setHref("".concat(data.urlSite).concat(data.urlVideo))}castPlayer=new CastPlayer;window["__onGCastApiAvailable"]=function(isAvailable){if(isAvailable){Player.controlBar.addChild(COMPONENTS_NAMES.GOOGLE_CHROME_CAST);castPlayer.initializeCastApi(Player,data)}};if(isMobile){Player.mobile();Player.addClass("is-mobile")}cachedPlayer=Player;initPLayerUI(Player,data);// if lib not present (it can happen with ad blocker) video will continue;
if(Player.ads&&data.preroll){Player.ads({timeout:1500})}if(Player.stats){Player.stats(data)}Player.autoplay(data.autostart);if(data.autostart){Player.one(PLAYER_EVENTS.CANPLAYTHROUGH,makeForceAutoplay(Player));Player.one(PLAYER_EVENTS.LOADED_META_DATA,makeForceAutoplay(Player))}Player.on(PLAYER_EVENTS.SEEKING,function(){if(!Player.paused()){Player.playbackRate(0)}});Player.on(PLAYER_EVENTS.SEEKED,function(){Player.playbackRate(1);if(!Player.paused()){Player.play()}});Player.on(PLAYER_EVENTS.WAITING,function(){if(!Player.el().classList.contains(CUSTOM_CLASSLIST.CUSTOM_WAITING)){this.addClass(CUSTOM_CLASSLIST.CUSTOM_WAITING)}});Player.on(PLAYER_EVENTS.PLAYING,function(){if(Player.el().classList.contains(CUSTOM_CLASSLIST.CUSTOM_WAITING)){var that=this;setTimeout(function(){that.removeClass(CUSTOM_CLASSLIST.CUSTOM_WAITING)},100)}var Playlist=Player.getChild(COMPONENTS_NAMES.PLAYLIST);if(Playlist){Playlist.hide()}});Player.on(PLAYER_EVENTS.ENDED,function(){var Playlist=Player.getChild(COMPONENTS_NAMES.PLAYLIST);if(Playlist){Playlist.show()}});if(data.enablePlaylist){Playlist=Player.addChild(COMPONENTS_NAMES.PLAYLIST);Player.one("playing",function(){fetch(Utils.formatURL(data.urlSite)+"/xml/video.xml").then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(res){var playlist;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=Utils;_context2.next=3;return res.text();case 3:_context2.t1=_context2.sent;_context2.t2=["title","creator","location","image","identifier","duration","info"];playlist=_context2.t0.getInXml.call(_context2.t0,_context2.t1,"track",_context2.t2);Playlist.addItems(playlist);case 7:case"end":return _context2.stop();}}},_callee2)}));return function(_x3){return _ref.apply(this,arguments)}}()).catch(console.error)})}// Set hashed video url as source
_context3.next=33;return fetchVideoURL(data.urlSite,data.idvideo,data.startHD?data.vidHDName:data.vidName);case 33:videoURL=_context3.sent;Player.wmaker_is_hd=data.startHD;Player.src(videoURL);_context3.next=38;return fetch(Utils.formatURL(data.urlSite)+data.urlToBlock).then(function(res){return res.status}).catch(console.warn);case 38:urlToBlockStatus=_context3.sent;if(data.preroll&&urlToBlockStatus<300){Player.preroll(data);Player.hasAdBlock=false}else{Player.hasAdBlock=true}case 40:case"end":return _context3.stop();}}},_callee3,null,[[4,8]])}));return _initVideo.apply(this,arguments)}function updateParams(params){updateCache(params);UpdateFunctions.applyColors(cachedPlayerState);UpdateFunctions.changeTemplate(cachedPlayerState);UpdateFunctions.changeShare(cachedPlayerState);UpdateFunctions.changeAuthor(cachedPlayerState);UpdateFunctions.changePosition(cachedPlayerState);UpdateFunctions.changePlaylist(cachedPlayerState)}function getPlayerParams(){return cachedPlayerState}window.updateParams=updateParams;window.getPlayerParams=getPlayerParams;window.vjs=initVideo;// TODO refactor that with a factory
var UpdateFunctions={changeAuthor:function changeAuthor(params){if(!cachedPlayer)return;var authorBlock=cachedPlayer.getChild(COMPONENTS_NAMES.AUTHOR_BLOCK);if(!authorBlock){cachedPlayer.addChild(COMPONENTS_NAMES.AUTHOR_BLOCK)}authorBlock=cachedPlayer.getChild(COMPONENTS_NAMES.AUTHOR_BLOCK);if(!authorBlock)return;if(params.from&&params.from!=="undefined"&&params.vidTitle&&params.vidTitle!=="undefined"){authorBlock.setVisibility(true,{vidTitle:params.vidTitle,from:params.from})}else{authorBlock.setVisibility(false)}},changePlaylist:function changePlaylist(params){if(!cachedPlayer)return;var Playlist=cachedPlayer.getChild(COMPONENTS_NAMES.PLAYLIST);if(Playlist){if(params.enablePlaylist&&cachedPlayer.ended()){Playlist.show()}else{Playlist.hide()}}},changeShare:function changeShare(params){if(!cachedPlayer)return;var SocialMenu=cachedPlayer.getChild(COMPONENTS_NAMES.SOCIAL_MENU);if(!SocialMenu)return;SocialMenu.setElement("embeddable-item",params.enableEmbed);SocialMenu.setElement("shareable-item",params.enableShare)},changePosition:function changePosition(params){if(!cachedPlayer||!params.position)return;var logo=cachedPlayer.getChild(COMPONENTS_NAMES.LOGO);if(!logo)return;logo.setAttr({position:params.position})},changeTemplate:function changeTemplate(params){var _el$classList;if(!params.template||!cachedPlayer)return;var el=cachedPlayer.el();(_el$classList=el.classList).remove.apply(_el$classList,_toConsumableArray(["1","2","3","4"].map(function(tId){return"template_".concat(tId)})));el.classList.add("template_".concat(params.template))},applyColors:function applyColors(colors,styleTagID){// bufferBarColor; // Icons Off
// controlBarColor; // Dominant
// iconsColor; // Play and Autres
// progressBarColor; // RollOver
var styleSheetID=styleTagID||"colorStyle";var style=document.getElementById(styleSheetID);if(style){document.head.removeChild(style);style=null}style=document.createElement("style");style.id=styleSheetID;document.head.appendChild(style);[":root {\n                --connected-color: ".concat(cachedPlayerState.progressBarColor,";\n                --disconnected-color: ").concat(cachedPlayerState.iconsColor,";\n             }\n            "),".vjs-skin.template_4 .vid-author-name {\n         background-color: ".concat(cachedPlayerState.iconsColor," !important;\n         color: ").concat(cachedPlayerState.controlBarColor," !important;\n        }"),".vjs-skin.template_4 .vid-title {\n         background-color: ".concat(cachedPlayerState.iconsColor," !important;\n         color: ").concat(cachedPlayerState.controlBarColor," !important;\n        }"),".vjs-skin.template_4 .vjs-slider {\n            background-color: ".concat(cachedPlayerState.controlBarColor," !important;\n        }"),".vid-author-name {\n         background-color: ".concat(cachedPlayerState.progressBarColor," !important;\n         color: ").concat(cachedPlayerState.iconsColor," !important;\n        }"),".vid-title {\n         background-color: ".concat(cachedPlayerState.controlBarColor," !important;\n         color: ").concat(cachedPlayerState.iconsColor," !important;\n        }"),".vjs-volume-level {\n            background-color: ".concat(cachedPlayerState.progressBarColor," !important;\n        }"),".vjs-skin:not(.template_4) .social-menu-item {\n            color: ".concat(cachedPlayerState.iconsColor," !important;\n            transition: all 250ms ease;\n        }"),".vjs-skin .vjs-control {\n            color: ".concat(cachedPlayerState.iconsColor," !important;\n        }"),".vjs-skin:not(.template_4) .social-menu-item:hover {\n            color: ".concat(cachedPlayerState.progressBarColor," !important;\n        }"),".social-menu {\n            background-color: ".concat(cachedPlayerState.controlBarColor,";\n        }"),".vjs-skin:not(.template_4) .vjs-control-bar {\n            background-color: ".concat(cachedPlayerState.controlBarColor," !important;\n        }"),".vjs-skin .vjs-play-progress {\n            background-color: ".concat(cachedPlayerState.progressBarColor," !important;\n        }"),".vjs-skin .vjs-airplay-control {\n           stroke: ".concat(cachedPlayerState.iconsColor," !important;\n        }"),".vjs-skin .vjs-airplay-control.active {\n           stroke: ".concat(cachedPlayerState.progressBarColor," !important;\n        }"),".vjs-skin .vjs-hd-control {\n           color: ".concat(cachedPlayerState.iconsColor," !important;\n        }"),".vjs-skin .vjs-hd-control.is-hd {\n           color: ".concat(cachedPlayerState.progressBarColor," !important;\n        }"),".vjs-skin .vjs-big-play-button {\n           transition: all 250ms ease;\n           background-color: ".concat(cachedPlayerState.controlBarColor," !important;\n           color: ").concat(cachedPlayerState.iconsColor," !important;\n           opacity: 0.8;\n        }"),".vjs-skin .vjs-big-play-button:hover {\n           background-color: ".concat(cachedPlayerState.progressBarColor," !important;\n           opacity: 1;\n        }"),".vjs-skin .vjs-progress-holder {\n           background-color: ".concat(cachedPlayerState.bufferBarColor," !important;\n        }")].forEach(function(rule,index){style.sheet.insertRule(rule,index)})}};var Utils={stripDevExtension:function stripDevExtension(url){return url.replace(DEV_EXT_PATTERN,"/")},ellipsisString:function ellipsisString(text,maxChar){return Utils.isMobile()&&text.length>maxChar-3?"".concat(text.substring(0,maxChar-3),"..."):text},isCrossSiteFrame:function isCrossSiteFrame(){var a=document.createElement("a");a.href=document.referrer;var host=Utils.getNestedChild(document,"location.host",false);var aHost=a["host"];if(window.document.documentMode){aHost=aHost.replace(":443","");aHost=aHost.replace(":80","")}return aHost!==host},isMobileVersion:function isMobileVersion(){var isMobileUi;var frameUnreachable=false;try{isMobileUi=window.parent.document.body.classList.contains("ui-mobile-viewport")}catch(e){frameUnreachable=true}return Utils.isCrossSiteFrame()||frameUnreachable||isMobileUi},isMobile:function isMobile(){return videojs.browser.IS_ANDROID||videojs.browser.IS_IOS},getNestedChild:function getNestedChild(obj,path,defReturn){if(typeof path!=="string")throw new Error("Path must be of type String");path=path.split(".").filter(function(key){return key.length});var res=path.reduce(function(dive,key){return dive&&dive[key]},obj);return res?res:defReturn},formatURL:function formatURL(urlString){if(urlString.startsWith("http")){return urlString}if(urlString.startsWith("//")){return urlString}return"//"+urlString},cleanOutsideObject:function cleanOutsideObject(obj){function textToJS(v){switch(v){case"true":return true;case"false":return false;case"undefined":return undefined;case"null":return null;default:return v;}}var newObj={};var keys=Object.keys(obj);for(var _i=0,_keys=keys;_i<_keys.length;_i++){var key=_keys[_i];newObj[key]=textToJS(obj[key])}return newObj},mapVideoDataToAdPluginSettings:function mapVideoDataToAdPluginSettings(videoData){if(!videoData.preroll)throw new Error("Ad can't run without a ad video url");var skipTime;try{skipTime=parseInt(videoData.prerollStop,10);skipTime=skipTime===0?null:skipTime}catch(e){skipTime=null}return{src:Utils.stripDevExtension(videoData.preroll),href:videoData.prerollLink,skipTime:skipTime}},getInXml:function getInXml(xmlOrString,rootName,keys){var xml=xmlOrString;if(typeof xmlOrString==="string"){xml=new window.DOMParser().parseFromString(xmlOrString,"application/xml")}var listItem=xml.getElementsByTagName(rootName);var formattedRes=[];for(var i=0;i<listItem.length;i++){var element={};var _iterator2=_createForOfIteratorHelper(keys),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var key=_step2.value;var found=listItem[i].getElementsByTagName(key)[0]&&listItem[i].getElementsByTagName(key)[0].childNodes[0]&&listItem[i].getElementsByTagName(key)[0].childNodes[0].nodeValue;if(found)element[key]=found}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}formattedRes.push(element)}return formattedRes},textAdXmlToJS:function textAdXmlToJS(xml){// This is not a general method
var ads=[];var obj=xml.children.item(0);for(var i=0;i<obj.children.length;i++){var item=obj.children[i];var ad={};for(var index=0;index<item.children.length;index++){var element=item.children.item(index);ad[element.nodeName]=element.innerHTML.replace("<![CDATA[","").replace("]]>","")}ads.push(ad)}return ads}};var Translations={getTranslationOfWatchOnWebsite:function getTranslationOfWatchOnWebsite(lang){switch(lang){case"ar":return"\u0645\u0634\u0627\u0647\u062F\u0629 \u0639\u0644\u0649 \u0627\u0644\u0627\u0646\u062A\u0631\u0646\u062A";case"es":return"Ver en la p\xE1gina web";case"fr":return"Regardez sur le site";case"it":return"Guarda sul sito";case"ja":return"\u30A6\u30A7\u30D6\u30B5\u30A4\u30C8\u4E0A\u3067\u898B\u307E\u3059";case"nl":return"Kijk op de website";case"de":return"Schauen Sie auf der Website";case"pt":return"Assista no site";default:return"Watch on website";}},remainingAdText:function remainingAdText(ln){switch(ln){case"ar":return" \u064A\u0645\u0643\u0646\u0643 \u0625\u063A\u0644\u0627\u0642 \u0647\u0630\u0627 \u0627\u0644\u0627\u0639\u0644\u0627\u0646 \u0641\u064A"+"[sec]"+" \u062B\u0648\u0627\u0646";case"es":return"Puede cerrar este anuncio en [sec] segundos";case"fr":return"Vous pourrez fermer cette publicit\xE9 dans [sec] secondes";case"it":return"Si pu\xF2 chiudere questo annuncio in [sec] secondi";case"ja":return"\u3053\u306E\u5E83\u544A\u3067\u9589\u3058\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059[sec]\u79D2\u5F8C\u306B\u59CB\u307E\u308A\u307E\u3059";case"nl":return"U kunt sluiten deze advertentie toe in [sec] seconde";case"de":return"Sie k\xF6nnen diese Werbe schlie\xDFen [sec] Sekunden";case"pt":return"Voc\xEA pode fechar esta publicidade em [sec] segundos";default:return"You can close this advertisement in [sec] seconds";}},fullPrerollMsg:function fullPrerollMsg(ln){switch(ln){case"ar":return"\u0645\u0644\u0641 \u0627\u0644\u0641\u064A\u062F\u064A\u0648 \u0633\u064A\u0634\u063A\u0644 \u0628\u0639\u062F "+"[sec]"+" \u062B\u0648\u0627\u0646";case"es":return"Tu v\xEDdeo se iniciar\xE1 en [sec] segundos";case"fr":return"Votre vid\xE9o commence dans [sec] secondes";case"it":return"Il tuo video sar\xE0 avviato in [sec] secondi";case"ja":return"\u52D5\u753B\u306F[sec]\u79D2\u5F8C\u306B\u59CB\u307E\u308A\u307E\u3059";case"nl":return"Je video zal beginnen in [sec] seconde";case"de":return"Ihr Video startet in [sec] Sekunden";case"pt":return"O seu video come\xE7a em [sec] segundos";default:return"Your video will begin in [sec] seconds";}}};